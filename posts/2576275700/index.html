<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" name="viewport"><meta name="description" content="scipyç¨€ç–çŸ©é˜µ"><meta name="hexo-theme-A4" content="v1.9.6"><link rel="alternate icon" type="image/webp" href="/vate.png"><title>Hello world | :)</title><link rel="stylesheet" href="/css/highlight/style1.css"><link rel="stylesheet" href="/css/reset.css"><link rel="stylesheet" href="/css/markdown.css"><link rel="stylesheet" href="/css/fonts.css"><link rel="stylesheet" href="/css/waline.css"><link rel="stylesheet" href="/css/ui.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/returnToTop.css"><link rel="stylesheet" href="/css/unicons.css"><link rel="stylesheet" href="/css/toc.css"><link rel="stylesheet" href="/css/returnToLastPage.css"><link rel="stylesheet" href="/css/lightgallery-bundle.min.css"><meta name="generator" content="Hexo 7.3.0"></head><style>.index-main{max-width:880px}</style><style>:root{--waline-theme-color:#fec591;--waline-color:#fec591;--waline-border-color:#fec591;--waline-white:#fec591;--waline-bgcolor-light:#005454}body{color:#fec591;background:#005454}.post-md code{background:#000;color:#fff}.post-md .highlight,.post-md pre{background:#000;color:#fff}pre .header,pre .inheritance,pre .ruby .symbol,pre .string,pre .value,pre .xml .cdata{color:#fec591}pre .built_in,pre .constant,pre .literal,pre .number,pre .params,pre .preprocessor{color:#fec591}.year-font-color{color:#fec591!important}.wl-card span.wl-nick{color:#fec591}.wl-card .wl-badge{border:1px solid #fec591;color:#fec591}.wl-btn{border:1px solid #fec591;color:#fec591}.wl-btn.primary{color:#005454}.wl-header label{color:#fec591}a{color:#fec591}.post-md a{color:#fec591}.nav li a{color:#fec591}.archive-main a:link{color:#fec591}.archive-main a:visited{color:#fec591}.archive li span{color:#fec591}.post-main-title{color:#fec591}.post-md h1,.post-md h2,.post-md h3,.post-md h4,.post-md h5,.post-md h6{color:#fec591}[data-waline] p{color:#fec591}[data-waline] a{color:#fec591}.wl-sort li.active{color:#fec591}.wl-card .wl-meta>span{background:#005454}.paper{background:#005454}.index-main{background:#005454}.paper-main{background:#005454}.wl-panel{background:#005454}.archive li:nth-child(odd){background:#005454}.archive li:nth-child(even){background:#005454}.post-md table tr:nth-child(odd) td{background:#005454}.post-md table tr:nth-child(even) td{background:#005454}.progress-wrap::after{color:#fec591}.progress-wrap svg.progress-circle path{stroke:#fec591}.progress-wrap::before{background-image:linear-gradient(298deg,#fec591,#fec591)}.return-to-last-progress-wrap::after{color:#fec591}.return-to-last-progress-wrap svg.progress-circle path{stroke:#fec591}.return-to-last-progress-wrap::before{background-image:linear-gradient(298deg,#fec591,#fec591)}.left-toc-container::-webkit-scrollbar-thumb{background-color:#fec591}.bs-docs-sidebar .nav>.active>a,.bs-docs-sidebar .nav>li>a:focus,.bs-docs-sidebar .nav>li>a:hover{color:#fec591;border-left-color:#fec591}.bs-docs-sidebar .nav>li>a{color:#fec591}</style><body><script src="/js/darkmode-js.min.js"></script><script>const options={bottom:"40px",right:"unset",left:"42px",time:"0.3s",mixColor:"#fff",backgroundColor:" #005454  ",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"ğŸŒ“",autoMatchOsTheme:!0},darkmode=new Darkmode(options);darkmode.showWidget()</script><div class="left-toc-container"><nav id="toc" class="bs-docs-sidebar"></nav></div><div class="paper"><div class="shadow-drop-2-bottom paper-main"><div class="header"><div class="header-container"><img style="width:56px;height:auto" alt="^-^" cache-control="max-age=86400" class="header-img" src="/vate.png" width="10%"><div class="header-content"><a class="logo" href="/">Hello world</a> <span class="description">Life love</span></div></div><ul class="nav"><li><a href="/">ğŸ é¦–é¡µ</a></li><li><a href="/list/">ğŸ“œæ–‡ç« </a></li><li><a href="/categories/">ğŸ“åˆ†ç±»</a></li><li><a href="/about/">â“å…³äº</a></li><li><a href="/navi/">NAVI</a></li></ul></div><div class="post-main"><div class="post-main-title" style="text-align:center">scipyç¨€ç–çŸ©é˜µ</div><div class="post-head-meta-center"><span>æœ€è¿‘æ›´æ–°ï¼š2024-11-25</span> &nbsp; | &nbsp; <span>å­—æ•°æ€»è®¡ï¼š3.8k</span> &nbsp; | &nbsp; <span>é˜…è¯»ä¼°æ—¶ï¼š16åˆ†é’Ÿ</span> &nbsp; | &nbsp; <span id="busuanzi_container_page_pv">é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡</span></div><div class="post-md"><ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95"><span class="post-toc-text">æ–‡ç« ç›®å½•</span></a></li></ol><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E7%A8%80%E7%96%8F%E7%9F%A9%E9%98%B5%E6%A0%BC%E5%BC%8F"><span class="post-toc-text">ç¨€ç–çŸ©é˜µæ ¼å¼</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#coo-matrix"><span class="post-toc-text">coo_matrix</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#csr-matrix"><span class="post-toc-text">csr_matrix</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#csc-matrix"><span class="post-toc-text">csc_matrix</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#lil-matrix"><span class="post-toc-text">lil_matrix</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#dok-matrix"><span class="post-toc-text">dok_matrix</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#dia-matrix"><span class="post-toc-text">dia_matrix</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#bsr-matrix"><span class="post-toc-text">bsr_matrix</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%AE%9E%E7%94%A8%E5%87%BD%E6%95%B0"><span class="post-toc-text">å®ç”¨å‡½æ•°</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93"><span class="post-toc-text">ç»éªŒæ€»ç»“</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%8F%82%E8%80%83"><span class="post-toc-text">å‚è€ƒ</span></a><div class=".article-gallery"><blockquote><p>åŸæ–‡åœ°å€ <a target="_blank" rel="noopener" href="https://blog.csdn.net/jeffery0207/article/details/100064602">blog.csdn.net</a></p></blockquote><h4 id="æ–‡ç« ç›®å½•"><a href="#æ–‡ç« ç›®å½•" class="headerlink" title="æ–‡ç« ç›®å½•"></a>æ–‡ç« ç›®å½•</h4><ul><li><a href="#_1">ç¨€ç–çŸ©é˜µæ ¼å¼</a></li><li><ul><li><ul><li><a href="#coo_matrix_3">coo_matrix</a></li><li><a href="#csr_matrix_91">csr_matrix</a></li><li><a href="#csc_matrix_147">csc_matrix</a></li><li><a href="#lil_matrix_155">lil_matrix</a></li><li><a href="#dok_matrix_176">dok_matrix</a></li><li><a href="#dia_matrix_201">dia_matrix</a></li><li><a href="#bsr_matrix_229">bsr_matrix</a></li></ul></li></ul></li><li><a href="#_300">å®ç”¨å‡½æ•°</a></li><li><a href="#_382">ç»éªŒæ€»ç»“</a></li><li><a href="#_399">å‚è€ƒ</a></li></ul><h2 id="ç¨€ç–çŸ©é˜µæ ¼å¼"><a href="#ç¨€ç–çŸ©é˜µæ ¼å¼" class="headerlink" title="ç¨€ç–çŸ©é˜µæ ¼å¼"></a><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E7%A8%80%E7%96%8F%E7%9F%A9%E9%98%B5&spm=1001.2101.3001.7020">ç¨€ç–çŸ©é˜µ</a>æ ¼å¼</h2><h4 id="coo-matrix"><a href="#coo-matrix" class="headerlink" title="coo_matrix"></a>coo_matrix</h4><p>â€ƒâ€ƒ<code>coo_matrix</code>æ˜¯æœ€ç®€å•çš„ç¨€ç–çŸ©é˜µå­˜å‚¨æ–¹å¼ï¼Œé‡‡ç”¨ä¸‰å…ƒç»„<code>(row, col, data)</code>(æˆ–ç§°ä¸º<code>ijv format</code>) çš„å½¢å¼æ¥å­˜å‚¨çŸ©é˜µä¸­éé›¶å…ƒç´ çš„ä¿¡æ¯ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¸€èˆ¬<code>coo_matrix</code>ç”¨æ¥åˆ›å»ºçŸ©é˜µï¼Œå› ä¸º<code>coo_matrix</code>æ— æ³•å¯¹çŸ©é˜µçš„å…ƒç´ è¿›è¡Œå¢åˆ æ”¹æ“ä½œï¼›åˆ›å»ºæˆåŠŸä¹‹åå¯ä»¥è½¬åŒ–æˆå…¶ä»–æ ¼å¼çš„ç¨€ç–çŸ©é˜µï¼ˆå¦‚<code>csr_matrix</code>ã€<code>csc_matrix</code>ï¼‰è¿›è¡Œè½¬ç½®ã€çŸ©é˜µä¹˜æ³•ç­‰æ“ä½œã€‚</p><p><a href="/./../img/246c38acc2926215c1bed2259267d2e3.gif" class="gallery-item" style="box-shadow:none"><img src="/./../img/246c38acc2926215c1bed2259267d2e3.gif"></a></p><p><code>coo_matrix</code>å¯ä»¥é€šè¿‡å››ç§æ–¹å¼å®ä¾‹åŒ–ï¼Œé™¤äº†å¯ä»¥é€šè¿‡<code>coo_matrix(D)</code>, D ä»£è¡¨å¯†é›†çŸ©é˜µï¼›<code>coo_matrix(S)</code>, S ä»£è¡¨å…¶ä»–ç±»å‹ç¨€ç–çŸ©é˜µæˆ–è€…<code>coo_matrix((M, N), [dtype])</code>æ„å»ºä¸€ä¸ª shape ä¸º M*N çš„ç©ºçŸ©é˜µï¼Œé»˜è®¤æ•°æ®ç±»å‹æ˜¯<code>d</code>ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>(row, col, data)</code>ä¸‰å…ƒç»„åˆå§‹åŒ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import numpy as np</span><br><span class="line">&gt;&gt;&gt; from scipy.sparse import coo_matrix</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; _row  = np.array([0, 3, 1, 0])</span><br><span class="line">&gt;&gt;&gt; _col  = np.array([0, 3, 1, 2])</span><br><span class="line">&gt;&gt;&gt; _data = np.array([4, 5, 7, 9])</span><br><span class="line">&gt;&gt;&gt; coo = coo_matrix((_data, (_row, _col)), shape=(4, 4), dtype=np.int)</span><br><span class="line">&gt;&gt;&gt; coo.todense()  # é€šè¿‡toarrayæ–¹æ³•è½¬åŒ–æˆå¯†é›†çŸ©é˜µ(numpy.matrix)</span><br><span class="line">&gt;&gt;&gt; coo.toarray()  # é€šè¿‡toarrayæ–¹æ³•è½¬åŒ–æˆå¯†é›†çŸ©é˜µ(numpy.ndarray)</span><br><span class="line">array([[4, 0, 9, 0],</span><br><span class="line">       [0, 7, 0, 0],</span><br><span class="line">       [0, 0, 0, 0],</span><br><span class="line">       [0, 0, 0, 5]])</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢é€šè¿‡<code>triplet format</code>çš„å½¢å¼æ„å»ºäº†ä¸€ä¸ª<code>coo_matrix</code>å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åæ ‡ç‚¹ (0,0) å¯¹åº”å€¼ä¸º 4ï¼Œåæ ‡ç‚¹ (1,1) å¯¹åº”å€¼ä¸º 7 ç­‰ç­‰ï¼Œè¿™å°±æ˜¯<code>coo_matrix</code>ã€‚<code>coo_matrix</code>å¯¹è±¡æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå¤§å¤šæ•°æ˜¯ elementwise çš„<a target="_blank" rel="noopener" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.coo_matrix.html#scipy.sparse.coo_matrix">æ“ä½œå‡½æ•°</a>ï¼›<code>coo_matrix</code>å¯¹è±¡æœ‰ä»¥ä¸‹å±æ€§ï¼š</p><ul><li><p><strong><code>dtype</code></strong> dtype</p><p>çŸ©é˜µä¸­å…ƒç´ çš„æ•°æ®ç±»å‹</p></li><li><p><strong><code>shape</code></strong> 2-tuple</p><p>è·å–çŸ©é˜µçš„ shape</p></li><li><p><strong><code>ndim</code></strong> int</p><p>è·å–çŸ©é˜µçš„ç»´åº¦ï¼Œå½“ç„¶å€¼æ˜¯ 2 å’¯</p></li><li><p><strong><code>nnz</code></strong></p><p>å­˜å‚¨å€¼çš„ä¸ªæ•°ï¼ŒåŒ…æ‹¬æ˜¾ç¤ºå£°æ˜çš„é›¶å…ƒç´  (æ³¨æ„)</p></li><li><p><strong><code>data</code></strong></p><p>ç¨€ç–çŸ©é˜µå­˜å‚¨çš„å€¼ï¼Œæ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œå³ä¸Šé¢ä¾‹å­ä¸­çš„<code>_data</code></p></li><li><p><strong><code>row</code></strong></p><p>ä¸<code>data</code>åŒç­‰é•¿åº¦çš„ä¸€ç»´æ•°ç»„ï¼Œè¡¨å¾<code>data</code>ä¸­æ¯ä¸ªå…ƒç´ çš„è¡Œå·</p></li><li><p><strong><code>col</code></strong></p><p>ä¸<code>data</code>åŒç­‰é•¿åº¦çš„ä¸€ç»´æ•°ç»„ï¼Œè¡¨å¾<code>data</code>ä¸­æ¯ä¸ªå…ƒç´ çš„åˆ—å·</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ<code>coo_matrix</code>çŸ©é˜µæ–‡ä»¶é€šå¸¸å­˜æˆä»¥ä¸‹å½¢å¼ï¼Œè¡¨ç¤ºç¨€ç–çŸ©é˜µæ˜¯<code>coo_matrix</code>(<strong>coo</strong>rdinate)ï¼Œç”± 13885 è¡Œ 1 åˆ—ç»„æˆï¼Œå…±æœ‰ 949 ä¸ªå…ƒç´ å€¼ä¸ºéé›¶ï¼Œæ•°æ®ç±»å‹ä¸ºæ•´å½¢ã€‚</p></li></ul><p><a href="/./../img/b44de18edf0ae0d55b52797101751d3f.png" class="gallery-item" style="box-shadow:none"><img src="/./../img/b44de18edf0ae0d55b52797101751d3f.png"></a></p><p>ä¸‹é¢ç»™å‡º<code>coo_matrix</code>çŸ©é˜µæ–‡ä»¶è¯»å†™ç¤ºä¾‹ä»£ç ï¼Œ<code>mmread()</code>ç”¨äºè¯»å–ç¨€ç–çŸ©é˜µï¼Œ<code>mmwrite()</code>ç”¨äºå†™å…¥ç¨€ç–çŸ©é˜µï¼Œ<code>mminfo()</code>ç”¨äºæŸ¥çœ‹ç¨€ç–çŸ©é˜µæ–‡ä»¶å…ƒä¿¡æ¯ã€‚(è¿™ä¸‰ä¸ªå‡½æ•°çš„æ“ä½œä¸ä»…ä»…é™äº<code>coo_matrix</code>)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from scipy.io import mmread, mmwrite, mminfo</span><br><span class="line"></span><br><span class="line">HERE = dirname(__file__)</span><br><span class="line">coo_mtx_path = join(HERE, &#x27;data/matrix.mtx&#x27;)</span><br><span class="line">coo_mtx = mmread(coo_mtx_path)</span><br><span class="line">print(mminfo(coo_mtx_path))</span><br><span class="line"># (13885, 1, 949, &#x27;coordinate&#x27;, &#x27;integer&#x27;, &#x27;general&#x27;)</span><br><span class="line"># (rows, cols, entries, format, field, symmetry)</span><br><span class="line">mmwrite(join(HERE, &#x27;data/saved_mtx.mtx&#x27;), coo_mtx)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>coo_matrix</code>çš„ä¼˜ç‚¹ï¼š</p><ul><li>æœ‰åˆ©äºç¨€ç–æ ¼å¼ä¹‹é—´çš„å¿«é€Ÿè½¬æ¢ï¼ˆ<code>tobsr()</code>ã€<code>tocsr()</code>ã€<code>to_csc()</code>ã€<code>to_dia()</code>ã€<code>to_dok()</code>ã€<code>to_lil()</code>ï¼‰</li><li>å…è®¸åˆé‡å¤é¡¹ï¼ˆæ ¼å¼è½¬æ¢çš„æ—¶å€™è‡ªåŠ¨ç›¸åŠ ï¼‰</li><li>èƒ½ä¸ CSR &#x2F; CSC æ ¼å¼çš„å¿«é€Ÿè½¬æ¢</li></ul><p><code>coo_matrix</code>çš„ç¼ºç‚¹ï¼š</p><ul><li>ä¸èƒ½ç›´æ¥è¿›è¡Œç®—æœ¯è¿ç®—</li></ul><h4 id="csr-matrix"><a href="#csr-matrix" class="headerlink" title="csr_matrix"></a>csr_matrix</h4><p><code>csr_matrix</code>ï¼Œå…¨ç§°<code>Compressed Sparse Row matrix</code>ï¼Œå³æŒ‰è¡Œå‹ç¼©çš„ç¨€ç–çŸ©é˜µå­˜å‚¨æ–¹å¼ï¼Œç”±ä¸‰ä¸ªä¸€ç»´æ•°ç»„<code>indptr</code>, <code>indices</code>, <code>data</code>ç»„æˆã€‚è¿™ç§æ ¼å¼è¦æ±‚çŸ©é˜µå…ƒ<strong>æŒ‰è¡Œé¡ºåºå­˜å‚¨</strong>ï¼Œ<strong>æ¯ä¸€è¡Œä¸­çš„å…ƒç´ å¯ä»¥ä¹±åºå­˜å‚¨</strong>ã€‚é‚£ä¹ˆå¯¹äºæ¯ä¸€è¡Œå°±åªéœ€è¦ç”¨ä¸€ä¸ªæŒ‡é’ˆè¡¨ç¤ºè¯¥è¡Œå…ƒç´ çš„èµ·å§‹ä½ç½®å³å¯ã€‚<code>indptr</code>å­˜å‚¨æ¯ä¸€è¡Œæ•°æ®å…ƒç´ çš„èµ·å§‹ä½ç½®ï¼Œ<code>indices</code>è¿™æ˜¯å­˜å‚¨æ¯è¡Œä¸­æ•°æ®çš„åˆ—å·ï¼Œä¸<code>data</code>ä¸­çš„å…ƒç´ ä¸€ä¸€å¯¹åº”ã€‚</p><p><a href="/./../img/9e0fca97cc5164f26bdefc293f446993.gif" class="gallery-item" style="box-shadow:none"><img src="/./../img/9e0fca97cc5164f26bdefc293f446993.gif"></a></p><p><code>csr_matrix</code>å¯ç”¨äºå„ç§ç®—æœ¯è¿ç®—ï¼šå®ƒæ”¯æŒåŠ æ³•ï¼Œå‡æ³•ï¼Œä¹˜æ³•ï¼Œé™¤æ³•å’ŒçŸ©é˜µå¹‚ç­‰æ“ä½œã€‚å…¶æœ‰äº”ç§å®ä¾‹åŒ–æ–¹æ³•ï¼Œå…¶ä¸­å‰å››ç§åˆå§‹åŒ–æ–¹æ³•ç±»ä¼¼<code>coo_matrix</code>ï¼Œå³é€šè¿‡å¯†é›†çŸ©é˜µæ„å»ºã€é€šè¿‡å…¶ä»–ç±»å‹ç¨€ç–çŸ©é˜µè½¬åŒ–ã€æ„å»ºä¸€å®š shape çš„ç©ºçŸ©é˜µã€é€šè¿‡<code>(row, col, data)</code>æ„å»ºçŸ©é˜µã€‚å…¶ç¬¬äº”ç§åˆå§‹åŒ–æ–¹å¼è¿™æ˜¯ç›´æ¥ä½“ç°<code>csr_matrix</code>çš„å­˜å‚¨ç‰¹å¾ï¼š<code>csr_matrix((data, indices, indptr), [shape=(M, N)])</code>ï¼Œæ„æ€æ˜¯ï¼ŒçŸ©é˜µä¸­ç¬¬ i è¡Œéé›¶å…ƒç´ çš„åˆ—å·ä¸º<code>indices[indptr[i]:indptr[i+1]]</code>ï¼Œç›¸åº”çš„å€¼ä¸º<code>data[indptr[i]:indptr[i+1]]</code></p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import numpy as np</span><br><span class="line">&gt;&gt;&gt; from scipy.sparse import csr_matrix</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; indptr = np.array([0, 2, 3, 6])</span><br><span class="line">&gt;&gt;&gt; indices = np.array([0, 2, 2, 0, 1, 2])</span><br><span class="line">&gt;&gt;&gt; data = np.array([1, 2, 3, 4, 5, 6])</span><br><span class="line">&gt;&gt;&gt; csr = csr_matrix((data, indices, indptr), shape=(3, 3)).toarray()</span><br><span class="line">array([[1, 0, 2],</span><br><span class="line">       [0, 0, 3],</span><br><span class="line">       [4, 5, 6]])</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>csr_matrix</code>åŒæ ·æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå…¶ä¸­<code>tobytes()</code>ï¼Œ<code>tolist()</code>, <code>tofile()</code>ï¼Œ<code>tostring()</code>å€¼å¾—æ³¨æ„ï¼Œå…¶ä»–å…·ä½“å‚è€ƒ<a target="_blank" rel="noopener" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix">å®˜æ–¹æ–‡æ¡£</a>ï¼Œ<code>csr_matrix</code>å¯¹è±¡å±æ€§å‰äº”ä¸ªåŒ<code>coo_matrix</code>ï¼Œå¦å¤–è¿˜æœ‰å±æ€§å¦‚ä¸‹ï¼š</p><ul><li><p><strong><code>indices</code></strong></p><p>ä¸å±æ€§<code>data</code>ä¸€ä¸€å¯¹åº”ï¼Œå…ƒç´ å€¼ä»£è¡¨åœ¨æŸä¸€è¡Œçš„åˆ—å·</p></li><li><p><strong><code>indptr</code></strong></p><p><code>csr_matrix</code>å„è¡Œçš„èµ·å§‹å€¼ï¼Œ<code>length(csr_object.indptr) == csr_object.shape[0] + 1</code></p></li><li><p><strong><code>has_sorted_indices</code></strong></p><p>åˆ¤æ–­æ¯ä¸€è¡Œçš„<code>indices</code>æ˜¯å¦æ˜¯æœ‰åºçš„ï¼Œè¿”å› bool å€¼</p></li></ul><p><code>csr_matrix</code>çš„ä¼˜ç‚¹ï¼š</p><ul><li>é«˜æ•ˆçš„ç®—æœ¯è¿ç®— CSR + CSRï¼ŒCSR * CSR ç­‰</li><li>é«˜æ•ˆçš„è¡Œåˆ‡ç‰‡</li><li>å¿«é€ŸçŸ©é˜µè¿ç®—</li></ul><p><code>csr_matrix</code>çš„ç¼ºç‚¹ï¼š</p><ul><li>åˆ—åˆ‡ç‰‡æ“ä½œæ¯”è¾ƒæ…¢ï¼ˆè€ƒè™‘ csc_matrixï¼‰</li><li>ç¨€ç–ç»“æ„çš„è½¬æ¢æ¯”è¾ƒæ…¢ï¼ˆè€ƒè™‘ lil_matrix æˆ– doc_matrixï¼‰</li></ul><h4 id="csc-matrix"><a href="#csc-matrix" class="headerlink" title="csc_matrix"></a>csc_matrix</h4><p><code>csc_matrix</code>å’Œ<code>csr_matrix</code>æ­£å¥½ç›¸åï¼Œå³æŒ‰åˆ—å‹ç¼©çš„ç¨€ç–çŸ©é˜µå­˜å‚¨æ–¹å¼ï¼ŒåŒæ ·ç”±ä¸‰ä¸ªä¸€ç»´æ•°ç»„<code>indptr</code>, <code>indices</code>, <code>data</code>ç»„æˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><a href="/./../img/211aa1ae6643a4d1e98ba4188236890f.gif" class="gallery-item" style="box-shadow:none"><img src="/./../img/211aa1ae6643a4d1e98ba4188236890f.gif"></a></p><p>å…¶å®ä¾‹åŒ–æ–¹å¼ã€å±æ€§ã€æ–¹æ³•ã€ä¼˜ç¼ºç‚¹å’Œ<code>csr_matrix</code>åŸºæœ¬ä¸€è‡´ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œå®ƒä»¬ä¹‹é—´å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯æŒ‰è¡Œæˆ–æŒ‰åˆ—å‹ç¼©è¿›è¡Œå­˜å‚¨ã€‚è€Œè¿™ä¸€åŒºåˆ«å†³å®šäº†<code>csr_matrix</code>æ“…é•¿è¡Œæ“ä½œï¼›<code>csc_matrix</code>æ“…é•¿åˆ—æ“ä½œï¼Œè¿›è¡Œè¿ç®—æ—¶éœ€è¦è¿›è¡Œåˆç†å­˜å‚¨ç»“æ„çš„é€‰æ‹©ã€‚</p><h4 id="lil-matrix"><a href="#lil-matrix" class="headerlink" title="lil_matrix"></a>lil_matrix</h4><p><code>lil_matrix</code>ï¼Œå³ List of Lists formatï¼Œåˆç§°ä¸º Row-based linked list sparse <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=matrix&spm=1001.2101.3001.7020">matrix</a>ã€‚å®ƒä½¿ç”¨ä¸¤ä¸ªåµŒå¥—åˆ—è¡¨å­˜å‚¨ç¨€ç–çŸ©é˜µï¼š<code>data</code>ä¿å­˜æ¯è¡Œä¸­çš„éé›¶å…ƒç´ çš„å€¼ï¼Œ<code>rows</code>ä¿å­˜æ¯è¡Œéé›¶å…ƒç´ æ‰€åœ¨çš„åˆ—å· (åˆ—å·æ˜¯é¡ºåºæ’åºçš„)ã€‚è¿™ç§æ ¼å¼<strong>å¾ˆé€‚åˆé€ä¸ªæ·»åŠ å…ƒç´ ï¼Œå¹¶ä¸”èƒ½å¿«é€Ÿè·å–è¡Œç›¸å…³çš„æ•°æ®</strong>ã€‚å…¶åˆå§‹åŒ–æ–¹å¼åŒ<code>coo_matrix</code>åˆå§‹åŒ–çš„å‰ä¸‰ç§æ–¹å¼ï¼šé€šè¿‡å¯†é›†çŸ©é˜µæ„å»ºã€é€šè¿‡å…¶ä»–çŸ©é˜µè½¬åŒ–ä»¥åŠæ„å»ºä¸€ä¸ªä¸€å®š shape çš„ç©ºçŸ©é˜µã€‚</p><p><a href="/./../img/ab26c8ace315556577e437fcd87e6f7c.gif" class="gallery-item" style="box-shadow:none"><img src="/./../img/ab26c8ace315556577e437fcd87e6f7c.gif"></a></p><p><code>lil_matrix</code>å¯ç”¨äºç®—æœ¯è¿ç®—ï¼šæ”¯æŒåŠ æ³•ï¼Œå‡æ³•ï¼Œä¹˜æ³•ï¼Œé™¤æ³•å’ŒçŸ©é˜µå¹‚ã€‚å…¶å±æ€§å‰äº”ä¸ªåŒ<code>coo_matrix</code>ï¼Œå¦å¤–è¿˜æœ‰<code>rows</code>å±æ€§ï¼Œæ˜¯ä¸€ä¸ªåµŒå¥— Listï¼Œè¡¨ç¤ºçŸ©é˜µæ¯è¡Œä¸­éé›¶å…ƒç´ çš„åˆ—å·ã€‚LIL matrix æœ¬èº«çš„è®¾è®¡æ˜¯ç”¨æ¥æ–¹ä¾¿å¿«æ·æ„å»ºç¨€ç–çŸ©é˜µå®ä¾‹ï¼Œè€Œç®—æœ¯è¿ç®—ã€çŸ©é˜µè¿ç®—åˆ™è½¬åŒ–æˆ CSCã€CSR æ ¼å¼å†è¿›è¡Œï¼Œæ„å»ºå¤§å‹çš„ç¨€ç–çŸ©é˜µè¿˜æ˜¯æ¨èä½¿ç”¨ COO æ ¼å¼ã€‚</p><p>LIL format ä¼˜ç‚¹</p><ul><li>æ”¯æŒçµæ´»çš„åˆ‡ç‰‡æ“ä½œ_<strong>è¡Œåˆ‡ç‰‡æ“ä½œæ•ˆç‡é«˜ï¼Œåˆ—åˆ‡ç‰‡æ•ˆç‡ä½</strong>_</li><li>ç¨€ç–çŸ©é˜µæ ¼å¼ä¹‹é—´çš„è½¬åŒ–å¾ˆé«˜æ•ˆï¼ˆ<code>tobsr()</code>ã€<code>tocsr()</code>ã€<code>to_csc()</code>ã€<code>to_dia()</code>ã€<code>to_dok()</code>ã€<code>to_lil()</code>ï¼‰</li></ul><p>LIL format ç¼ºç‚¹</p><ul><li>åŠ æ³•æ“ä½œæ•ˆç‡ä½ (consider CSR or CSC)</li><li>åˆ—åˆ‡ç‰‡æ•ˆç‡ä½ (consider CSC)</li><li>çŸ©é˜µä¹˜æ³•æ•ˆç‡ä½ (consider CSR or CSC)</li></ul><h4 id="dok-matrix"><a href="#dok-matrix" class="headerlink" title="dok_matrix"></a>dok_matrix</h4><p>dok_matrixï¼Œå³ Dictionary Of Keys based sparse matrixï¼Œæ˜¯ä¸€ç§ç±»ä¼¼äº coo matrix ä½†åˆåŸºäºå­—å…¸çš„ç¨€ç–çŸ©é˜µå­˜å‚¨æ–¹å¼ï¼Œkey ç”±éé›¶å…ƒç´ çš„çš„åæ ‡å€¼<code>tuple(row, column)</code>ç»„æˆï¼Œvalue åˆ™ä»£è¡¨æ•°æ®å€¼ã€‚dok matrix éå¸¸é€‚åˆäºå¢é‡æ„å»ºç¨€ç–çŸ©é˜µï¼Œå¹¶ä¸€æ—¦æ„å»ºï¼Œå°±å¯ä»¥å¿«é€Ÿåœ°è½¬æ¢ä¸º<code>coo_matrix</code>ã€‚å…¶å±æ€§å’Œ<code>coo_matrix</code>å‰å››é¡¹åŒï¼›å…¶åˆå§‹åŒ–æ–¹å¼åŒ<code>coo_matrix</code>åˆå§‹åŒ–çš„å‰ä¸‰ç§ï¼šé€šè¿‡å¯†é›†çŸ©é˜µæ„å»ºã€é€šè¿‡å…¶ä»–çŸ©é˜µè½¬åŒ–ä»¥åŠæ„å»ºä¸€ä¸ªä¸€å®š shape çš„ç©ºçŸ©é˜µã€‚å¯¹äº dok matrixï¼Œå¯ç”¨äºç®—æœ¯è¿ç®—ï¼šå®ƒæ”¯æŒåŠ æ³•ï¼Œå‡æ³•ï¼Œä¹˜æ³•ï¼Œé™¤æ³•å’ŒçŸ©é˜µå¹‚ï¼›å…è®¸å¯¹å•ä¸ªå…ƒç´ è¿›è¡Œå¿«é€Ÿè®¿é—®ï¼ˆ O(1) ï¼‰; ä¸å…è®¸é‡å¤ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import numpy as np</span><br><span class="line">&gt;&gt;&gt; from scipy.sparse import dok_matrix</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; np.random.seed(10)</span><br><span class="line">&gt;&gt;&gt; matrix = random(3, 3, format=&#x27;dok&#x27;, density=0.4)</span><br><span class="line">&gt;&gt;&gt; matrix[1, 1] = 33</span><br><span class="line">&gt;&gt;&gt; matrix[2, 1] = 10</span><br><span class="line">&gt;&gt;&gt; matrix.toarray()</span><br><span class="line">array([[ 0.        ,  0.        ,  0.        ],</span><br><span class="line">       [ 0.        , 33.        ,  0.        ],</span><br><span class="line">       [ 0.19806286, 10.        ,  0.22479665]])</span><br><span class="line">&gt;&gt;&gt; dict(matrix)</span><br><span class="line">&#123;(2, 0): 0.19806286475962398, (2, 1): 10.0, (2, 2): 0.22479664553084766, (1, 1): 33.0&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; isinstance(matrix, dict)</span><br><span class="line">True</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢ä»£ç æœ€åå¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Š dok_matrix å®ä¾‹ä¹Ÿæ˜¯<code>dict</code>å®ä¾‹ï¼Œåœ¨å®ç°ä¸Šç»§æ‰¿äº† dict ç±»ã€‚</p><h4 id="dia-matrix"><a href="#dia-matrix" class="headerlink" title="dia_matrix"></a>dia_matrix</h4><p>dia_matrixï¼Œå…¨ç§° Sparse matrix with DIAgonal storageï¼Œæ˜¯ä¸€ç§å¯¹è§’çº¿çš„å­˜å‚¨æ–¹å¼ã€‚å¦‚ä¸‹å›¾ä¸­ï¼Œå°†ç¨€ç–çŸ©é˜µä½¿ç”¨<code>offsets</code>å’Œ<code>data</code>ä¸¤ä¸ªçŸ©é˜µæ¥è¡¨ç¤ºã€‚<code>offsets</code>è¡¨ç¤º<code>data</code>ä¸­æ¯ä¸€è¡Œæ•°æ®åœ¨åŸå§‹ç¨€ç–çŸ©é˜µä¸­çš„å¯¹è§’çº¿ä½ç½®<code>k</code>ï¼ˆk&gt;0, å¯¹è§’çº¿å¾€å³ä¸Šè§’ç§»åŠ¨ï¼›k&lt;0, å¯¹è§’çº¿å¾€å·¦ä¸‹æ–¹ç§»åŠ¨ï¼›k&#x3D;0ï¼Œä¸»å¯¹è§’çº¿ï¼‰ã€‚è¯¥æ ¼å¼çš„ç¨€ç–çŸ©é˜µå¯ç”¨äºç®—æœ¯è¿ç®—ï¼šå®ƒä»¬æ”¯æŒåŠ æ³•ï¼Œå‡æ³•ï¼Œä¹˜æ³•ï¼Œé™¤æ³•å’ŒçŸ©é˜µå¹‚ã€‚</p><p><a href="/./../img/ef5f9ccd575c78d8b51b60af7bd3133e.gif" class="gallery-item" style="box-shadow:none"><img src="/./../img/ef5f9ccd575c78d8b51b60af7bd3133e.gif"></a></p><p>dia_matrix äº”ä¸ªå±æ€§åŒ coo matrix, å¦å¤–è¿˜æœ‰å±æ€§<code>offsets</code>ï¼›dia_matrix æœ‰å››ç§åˆå§‹åŒ–æ–¹å¼ï¼Œå…¶ä¸­å‰ä¸‰ç§åˆå§‹åŒ–æ–¹å¼åŒ coo_matrix å‰ä¸‰ç§åˆå§‹åŒ–æ–¹å¼ï¼Œå³ï¼šé€šè¿‡å¯†é›†çŸ©é˜µæ„å»ºã€é€šè¿‡å…¶ä»–çŸ©é˜µè½¬åŒ–ä»¥åŠæ„å»ºä¸€ä¸ªä¸€å®š shape çš„ç©ºçŸ©é˜µã€‚ç¬¬å››ç§åˆå§‹åŒ–æ–¹å¼å¦‚ä¸‹ï¼š</p><p><strong><code>dia_matrix((data, offsets), shape=(M, N))</code></strong> ,</p><p>å…¶ä¸­ï¼Œ<code>data[k,:]</code>å­˜å‚¨ç€ç¨€ç–çŸ©é˜µ<code>offsets[k]</code>å¯¹è§’çº¿ä¸Šçš„å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; data = np.arange(15).reshape(3, -1) + 1</span><br><span class="line">&gt;&gt;&gt; offsets = np.array([0, -3, 2])</span><br><span class="line">&gt;&gt;&gt; dia = sparse.dia_matrix((data, offsets), shape=(7, 5))</span><br><span class="line">&gt;&gt;&gt; dia.toarray()</span><br><span class="line">array([[ 1,  0, 13,  0,  0],</span><br><span class="line">       [ 0,  2,  0, 14,  0],</span><br><span class="line">       [ 0,  0,  3,  0, 15],</span><br><span class="line">       [ 6,  0,  0,  4,  0],</span><br><span class="line">       [ 0,  7,  0,  0,  5],</span><br><span class="line">       [ 0,  0,  8,  0,  0],</span><br><span class="line">       [ 0,  0,  0,  9,  0]])</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸æ˜¯å¾ˆå¸¸ç”¨, äº†è§£å³å¯</p><h4 id="bsr-matrix"><a href="#bsr-matrix" class="headerlink" title="bsr_matrix"></a>bsr_matrix</h4><p>bsr_matrixï¼Œå…¨ç§° Block Sparse Row matrixï¼Œè¿™ç§å‹ç¼©æ–¹å¼æå…¶ç±»ä¼¼ CSR æ ¼å¼ï¼Œä½†ä½¿ç”¨åˆ†å—çš„æ€æƒ³å¯¹ç¨€ç–çŸ©é˜µè¿›è¡ŒæŒ‰è¡Œå‹ç¼©ã€‚æ‰€ä»¥ï¼ŒBSR é€‚ç”¨äºå…·æœ‰ dense å­çŸ©é˜µçš„ç¨€ç–çŸ©é˜µã€‚è¯¥ç§çŸ©é˜µæœ‰äº”ç§åˆå§‹åŒ–æ–¹å¼ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ul><li><p><strong><code>bsr_matrix(D, [blocksize=(R,C)])</code></strong></p><p>D æ˜¯ä¸€ä¸ª<code>M*N</code>çš„äºŒç»´ dense çŸ©é˜µï¼›blocksize éœ€è¦æ»¡è¶³æ¡ä»¶ï¼š<code>M % R = 0</code>å’Œ<code>N % C = 0</code>ï¼Œè‹¥ä¸ç»™å®šè¯¥å‚æ•°ï¼Œå†…éƒ¨å°†ä¼šåº”ç”¨å¯å‘å¼çš„ç®—æ³•è‡ªåŠ¨å†³å®šä¸€ä¸ªåˆé€‚çš„ blocksize.</p></li><li><p><strong><code>bsr_matrix(S, [blocksize=(R,C)])</code></strong></p><p>S æ˜¯æŒ‡å…¶ä»–ç±»å‹çš„ç¨€ç–çŸ©é˜µ</p></li><li><p><strong><code>bsr_matrix((M, N), [blocksize=(R,C), dtype])</code></strong></p><p>æ„å»ºä¸€ä¸ª shape ä¸º M*N çš„ç©ºçŸ©é˜µ</p></li><li><p><strong><code>bsr_matrix((data, ij), [blocksize=(R,C), shape=(M, N)])</code></strong></p><p><code>data</code> å’Œ<code>ij</code> æ»¡è¶³æ¡ä»¶ï¼š <code>a[ij[0, k], ij[1, k]] = data[k]</code></p></li><li><p><strong><code>bsr_matrix((data, indices, indptr), [shape=(M, N)])</code></strong></p><p><code>data.shape</code>ä¸€èˆ¬æ˜¯<code>k*R*C</code>ï¼Œå…¶ä¸­ Rã€C åˆ†åˆ«ä»£è¡¨ block çš„è¡Œå’Œåˆ—é•¿ï¼Œk ä»£è¡¨æœ‰å‡ ä¸ªå° block çŸ©é˜µï¼›ç¬¬ i è¡Œçš„å—åˆ—ç´¢å¼•å­˜å‚¨åœ¨<code>indices[indptr[i]:indptr[i+1]]</code>ï¼Œå…¶å€¼æ˜¯<code>data[ indptr[i]: indptr[i+1] ]</code>ã€‚</p></li></ul><p>bsr_matrix å¯ç”¨äºç®—æœ¯è¿ç®—ï¼šæ”¯æŒåŠ æ³•ï¼Œå‡æ³•ï¼Œä¹˜æ³•ï¼Œé™¤æ³•å’ŒçŸ©é˜µå¹‚ã€‚å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œå¯¹äºè®¸å¤šç¨€ç–ç®—æœ¯è¿ç®—ï¼ŒBSR æ¯” CSR å’Œ CSC æ›´æœ‰æ•ˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from scipy.sparse import bsr_matrix</span><br><span class="line">&gt;&gt;&gt; import numpy</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; indptr = np.array([0, 2, 3, 6])</span><br><span class="line">&gt;&gt;&gt; indices = np.array([0, 2, 2, 0, 1, 2])</span><br><span class="line">&gt;&gt;&gt; data = np.array([1, 2, 3, 4, 5, 6]).repeat(4).reshape(6, 2, 2)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; bsr_matrix((data,indices,indptr), shape=(6, 6)).toarray()</span><br><span class="line">array([[1, 1, 0, 0, 2, 2],</span><br><span class="line">       [1, 1, 0, 0, 2, 2],</span><br><span class="line">       [0, 0, 0, 0, 3, 3],</span><br><span class="line">       [0, 0, 0, 0, 3, 3],</span><br><span class="line">       [4, 4, 5, 5, 6, 6],</span><br><span class="line">       [4, 4, 5, 5, 6, 6]])</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡çƒ­å›¾è§‚å¯ŸçŸ©é˜µæœ‰æ²¡æœ‰æ˜æ˜¾åˆ†å—æ¨¡å¼å†å†³å®šä½¿ä¸ä½¿ç”¨è¯¥æ–¹å¼</p><p>bsr matrix å¯¹è±¡æ‹¥æœ‰ 9 ä¸ªå±æ€§ï¼Œå‰å››ä¸ªå±æ€§ä¸ coo matrix ç›¸åŒï¼Œå¦å¤–è¿˜æœ‰ä»¥ä¸‹å±æ€§ (æ³¨æ„ csr matrix å’Œ bsr matrix ä¹‹é—´çš„åŒºåˆ«ä¸è”ç³»)ï¼š</p><ul><li><p><strong><code>data</code></strong></p><p>å³ç¨€ç–çŸ©é˜µçš„æ•°ç»„ï¼Œ<code>data.shape</code>ä¸€èˆ¬æ˜¯<code>k*R*C</code></p></li><li><p><strong><code>indices</code></strong></p><p>ä¸å±æ€§<code>data</code>ä¸­çš„ k ä¸ªäºŒç»´çŸ©é˜µä¸€ä¸€å¯¹åº”ï¼Œå…ƒç´ å€¼ä»£è¡¨åœ¨æŸä¸€è¡Œçš„åˆ—å·</p></li><li><p><strong><code>indptr</code></strong></p><p>bsr å„è¡Œèµ·å§‹èµ·å§‹å€¼</p></li><li><p><strong><code>blocksize</code></strong></p><p>å³ tuple(R,C)</p></li><li><p><strong><code>has_sorted_indices</code></strong></p><p>åˆ¤æ–­æ¯ä¸€è¡Œçš„<code>indices</code>æ˜¯å¦æ˜¯æœ‰åºçš„ï¼Œè¿”å› bool å€¼</p></li></ul><h2 id="å®ç”¨å‡½æ•°"><a href="#å®ç”¨å‡½æ•°" class="headerlink" title="å®ç”¨å‡½æ•°"></a>å®ç”¨å‡½æ•°</h2><ul><li>æ„é€ ç‰¹æ®Šç¨€ç–çŸ©é˜µ</li></ul><p><code>scipy.sparse</code>æ¨¡å—è¿˜åŒ…å«ä¸€äº›ä¾¿æ·å‡½æ•°ï¼Œç”¨äºå¿«é€Ÿæ„å»ºå•ä½çŸ©é˜µã€å¯¹è§’çŸ©é˜µç­‰ï¼Œä¸‹é¢åšä¸€ä¸ªç®€å•çš„æ±‡æ€»ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>identity</code>(n[, dtype, format])</td><td>ç”Ÿæˆç¨€ç–å•ä½çŸ©é˜µ</td></tr><tr><td><code>kron</code>(A, B[, format])</td><td>sparse matrices A å’Œ B çš„<em>å…‹ç½—å†…å…‹</em>ç§¯</td></tr><tr><td><code>kronsum</code>(A, B[, format])</td><td>sparse matrices A å’Œ B çš„<em>å…‹ç½—å†…å…‹</em>å’Œ</td></tr><tr><td><code>diags</code>(diagonals[, offsets, shape, format, dtype])</td><td>æ„å»ºç¨€ç–å¯¹è§’é˜µ</td></tr><tr><td><code>spdiags</code>(data, diags, m, n[, format])</td><td>æ„å»ºç¨€ç–å¯¹è§’é˜µï¼ŒåŒä¸Šï¼Œä½†ä¸å¯æŒ‡å®š shape</td></tr><tr><td><code>block_diag</code>(mats[, format, dtype])</td><td>mats ä¸º<code>iterable</code>, åŒ…å«å¤šä¸ªçŸ©é˜µï¼Œæ ¹æ® mats æ„å»ºå—å¯¹è§’ç¨€ç–çŸ©é˜µã€‚</td></tr><tr><td><code>tril</code>(A[, k, format])</td><td>ä»¥ç¨€ç–æ ¼å¼è¿”å›çŸ©é˜µçš„ä¸‹ä¸‰è§’éƒ¨åˆ†</td></tr><tr><td><code>triu</code>(A[, k, format])</td><td>ä»¥ç¨€ç–æ ¼å¼è¿”å›çŸ©é˜µçš„ä¸Šä¸‰è§’éƒ¨åˆ†</td></tr><tr><td><code>bmat</code>(blocks[, format, dtype])</td><td>ä»ç¨€ç–å­å—æ„å»ºç¨€ç–çŸ©é˜µ</td></tr><tr><td><code>hstack</code>(blocks[, format, dtype])</td><td>æ°´å¹³å †å ç¨€ç–çŸ©é˜µ (column wise)</td></tr><tr><td><code>vstack</code>(blocks[, format, dtype])</td><td>å‚ç›´å †å ç¨€ç–çŸ©é˜µ (row wise)</td></tr><tr><td><code>rand</code>(m, n[, density, format, dtype, â€¦])</td><td>ä½¿ç”¨å‡åŒ€åˆ†å¸ƒçš„å€¼ç”Ÿæˆç»™å®šå½¢çŠ¶å’Œå¯†åº¦çš„ç¨€ç–çŸ©é˜µ</td></tr><tr><td><code>random</code>(m, n[, density, format, dtype, â€¦])</td><td>ä½¿ç”¨éšæœºåˆ†å¸ƒçš„å€¼ç”Ÿæˆç»™å®šå½¢çŠ¶å’Œå¯†åº¦çš„ç¨€ç–çŸ©é˜µ</td></tr><tr><td><code>eye</code>(m[, n, k, dtype, format])</td><td>ç”Ÿæˆç¨€ç–å•ä½å¯¹è§’é˜µï¼ˆé»˜è®¤<code>DIAgonal format</code>ï¼‰</td></tr></tbody></table><p><code>scipy.sparse.bmat</code>ä¸¾ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">In [1]: A = np.arange(8).reshape(2, 4)</span><br><span class="line"></span><br><span class="line">In [2]: T = np.tri(5, 4)</span><br><span class="line"></span><br><span class="line">In [3]: L = [[8] * 4] * 2</span><br><span class="line"></span><br><span class="line">In [4]: I = sparse.identity(4)</span><br><span class="line"></span><br><span class="line">In [5]: Z = sparse.coo_matrix((2, 3))</span><br><span class="line"></span><br><span class="line">In [6]: sp.bmat([[   A,    Z,    L],</span><br><span class="line">    ...:          [None, None,    I],</span><br><span class="line">    ...:          [   T, None, None]], dtype=int)</span><br><span class="line">Out[7]:</span><br><span class="line">&lt;11x11 sparse matrix of type &#x27;&lt;class &#x27;numpy.int64&#x27;&gt;&#x27;</span><br><span class="line">        with 33 stored elements in COOrdinate format&gt;</span><br><span class="line"></span><br><span class="line">In [8]: _.toarray()  # ipython previous output</span><br><span class="line">Out[9]:</span><br><span class="line">array([[0, 1, 2, 3, 0, 0, 0, 8, 8, 8, 8],</span><br><span class="line">       [4, 5, 6, 7, 0, 0, 0, 8, 8, 8, 8],</span><br><span class="line">       [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],</span><br><span class="line">       [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],</span><br><span class="line">       [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],</span><br><span class="line">       [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],</span><br><span class="line">       [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],</span><br><span class="line">       [1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],</span><br><span class="line">       [1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0],</span><br><span class="line">       [1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0],</span><br><span class="line">       [1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0]])</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>ç¨€ç–çŸ©é˜µç±»å‹åˆ¤æ–­</p><p><code>scipy.sparse</code>æ¨¡å—è¿˜åŒ…å«ä¸€äº›åˆ¤æ–­ç¨€ç–çŸ©é˜µç±»å‹çš„å‡½æ•°ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>issparse()</code> å’Œ <code>isspmatrix()</code> æ˜¯ç›¸åŒçš„å‡½æ•°ï¼Œä¹Ÿè®¸æ˜¯ç”±äºå†å²åŸå› ä¿ç•™ä¸‹æ¥äº†ä¸¤ä¸ªã€‚</p><ul><li><code>isspars(x)</code></li><li><code>isspmatrix(x)</code></li><li><code>isspmatrix_csc(x)</code></li><li><code>isspmatrix_csr(x)</code></li><li><code>isspmatrix_bsr(x)</code></li><li><code>isspmatrix_lil(x)</code></li><li><code>isspmatrix_dok(x)</code></li><li><code>isspmatrix_coo(x)</code></li><li><code>isspmatrix_dia(x)</code></li></ul></li><li><p>ç¨€ç–çŸ©é˜µå­˜å–</p><ul><li><code>load_npz(file)</code> ä»<code>.npz</code>æ–‡ä»¶ä¸­è¯»å–ç¨€ç–çŸ©é˜µ</li><li><code>save_npz(file, matrix[,compressed])</code> å°†ç¨€ç–çŸ©é˜µå†™å…¥<code>.npz</code>æ–‡ä»¶ä¸­</li></ul></li><li><p>å…¶ä»–</p><ul><li><code>find(A)</code> è¿”å›ç¨€ç–çŸ©é˜µä¸­éé›¶å…ƒç´ çš„ç´¢å¼•ä»¥åŠå€¼</li></ul></li></ul><h2 id="ç»éªŒæ€»ç»“"><a href="#ç»éªŒæ€»ç»“" class="headerlink" title="ç»éªŒæ€»ç»“"></a>ç»éªŒæ€»ç»“</h2><ul><li><p>è¦æœ‰æ•ˆåœ°æ„é€ çŸ©é˜µï¼Œè¯·ä½¿ç”¨<code>dok_matrix</code>æˆ–<code>lil_matrix</code></p><p><code>lil_matrix</code>ç±»æ”¯æŒåŸºæœ¬åˆ‡ç‰‡å’ŒèŠ±å¼ç´¢å¼•ï¼Œå…¶è¯­æ³•ä¸ NumPy Array ç±»ä¼¼ï¼›lil_matrix å½¢å¼æ˜¯åŸºäº row çš„ï¼Œå› æ­¤èƒ½å¤Ÿå¾ˆé«˜æ•ˆçš„è½¬ä¸º csrï¼Œä½†æ˜¯è½¬ä¸º csc æ•ˆç‡ç›¸å¯¹è¾ƒä½ã€‚</p></li><li><p>å¼ºçƒˆå»ºè®®ä¸è¦ç›´æ¥ä½¿ç”¨ NumPy å‡½æ•°è¿ç®—ç¨€ç–çŸ©é˜µ</p><p>å¦‚æœä½ æƒ³å°† NumPy å‡½æ•°åº”ç”¨äºè¿™äº›çŸ©é˜µï¼Œé¦–å…ˆè¦æ£€æŸ¥ SciPy æ˜¯å¦æœ‰è‡ªå·±çš„ç»™å®šç¨€ç–çŸ©é˜µç±»çš„å®ç°ï¼Œæˆ–è€…é¦–å…ˆå°†ç¨€ç–çŸ©é˜µè½¬æ¢ä¸º NumPy æ•°ç»„ï¼ˆä½¿ç”¨ç±»çš„<code>toarray()</code>æ–¹æ³•ï¼‰ã€‚</p></li><li><p>è¦æ‰§è¡Œä¹˜æ³•æˆ–è½¬ç½®ç­‰æ“ä½œï¼Œé¦–å…ˆå°†çŸ©é˜µè½¬æ¢ä¸º CSC æˆ– CSR æ ¼å¼ï¼Œæ•ˆç‡é«˜</p><p>CSR æ ¼å¼ç‰¹åˆ«é€‚ç”¨äºå¿«é€ŸçŸ©é˜µçŸ¢é‡äº§å“</p></li><li><p><code>CSR</code>ï¼Œ<code>CSC</code>å’Œ<code>COO</code>æ ¼å¼ä¹‹é—´çš„æ‰€æœ‰è½¬æ¢éƒ½æ˜¯çº¿æ€§å¤æ‚åº¦ã€‚</p></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a target="_blank" rel="noopener" href="https://matteding.github.io/2019/04/25/sparse-matrices/">matteding</a><br><a target="_blank" rel="noopener" href="https://docs.scipy.org/doc/scipy/reference/sparse.html">scipy sparse</a></p></div></li></div><div class="post-meta"><i><span>2024-11-25</span> <span>è¯¥ç¯‡æ–‡ç« è¢« Stone Ocean</span> <span>å½’ä¸ºåˆ†ç±»: <a href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a></span></i></div><br><div class="post-footer-pre-next"><span>ä¸Šä¸€ç¯‡ï¼š<a href="/posts/3005439712/">Modalverben</a></span> <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="/posts/3233623394/">Mechine learning(python)</a></span></div><div class="comments-container"><div id="comment-anchor"></div><div class="comment-area-title"></div><div id="waline"></div><script type="module">import{init}from"https://npm.elemecdn.com/hexo-theme-a4@latest/source/js/waline.mjs";function loadWaline(){init({el:"#waline",serverURL:"https://blogcomment-ivory.vercel.app",lang:"zh-CN",dark:'body[class~="dark-mode"]',requiredMeta:["nick","mail"],search:!1,reaction:!1,pageview:!1,comment:!1,locale:{placeholder:"ç•™ä¸‹ä½ çš„è¯„è®ºå§!",sofa:""}})}window.addEventListener("DOMContentLoaded",loadWaline)</script></div></div><div class="footer"><span>Â© 2023-2024 Ocean / <a href="/friends/">å‹é“¾</a></span></div><div class="footer-last"><span>é‚£å¹´å¤å¤©å®é™çš„æµ·</span></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript"></script><script src="/js/toc.js"></script><script src="/js/randomHeaderContent.js"></script><script src="/js/returnToTop.js"></script><script src="/js/returnToLastPage.js"></script><script src="/js/lightgallery/lightgallery.umd.min.js"></script><script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script><script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script><script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script><script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script><script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script><script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script><script type="text/javascript">if("undefined"!=typeof lightGallery){var options1={selector:".gallery-item",plugins:[lgThumbnail,lgFullscreen,lgAutoplay,lgZoom,lgRotate,lgPager],thumbnail:!1,zoom:!1,rotate:!1,autoplay:!1,fullScreen:!1,pager:!1,zoomFromOrigin:!0,actualSize:!0,enableZoomAfter:300};lightGallery(document.getElementsByClassName(".article-gallery")[0],options1)}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div class="progress-wrap shadow-drop-2-bottom"><svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102"><path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/></svg></div><div class="return-to-last-progress-wrap shadow-drop-2-bottom"><svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102"><path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/></svg></div></div></body></html>